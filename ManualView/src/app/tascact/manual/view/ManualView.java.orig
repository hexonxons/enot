<<<<<<< HEAD
/*
 * ManualView класс
 * 
 * Класс работы с учебником
 * 
 * Copyright 2012 hexonxons 
 * 
 * :mailto killgamesh666@gmail.com
 * 
 */

=======
>>>>>>> backup before atrocious experiments with git. Proper page scroll added
package app.tascact.manual.view;

import android.content.Context;
import android.graphics.Color;
<<<<<<< HEAD
import android.widget.ImageView;
import android.widget.LinearLayout;
=======
import app.tascact.manual.PageView;
>>>>>>> backup before atrocious experiments with git. Proper page scroll added
import app.tascact.manual.XMLResources;

public class ManualView extends SoftScrollView {
	private PageView[] pages;	
	
<<<<<<< HEAD
    public ManualView(Context context, 
    				  OnTouchListener touchListener, // обработчик касаний
    				  OnClickListener clickListener, // обработчик клика
    				  XMLResources markup)
    {
		super(context);		
		mResources = markup;
		this.setOrientation(1);
		this.setBackgroundColor(Color.WHITE);
		
		mClickListener = clickListener;
		mTouchListener = touchListener;
	}
    
    public void SetPage(int pageNum)
    {
    	// получаем ресурсы страницы
    	mPageRes = mResources.getPageResources(pageNum);    	
    	// удаляем все предыдущие части страницы
    	this.removeAllViews();
    	
		for(int i = 0; i < mPageRes.length; ++i)
		{
			ImageView pageElem = new ImageView(this.getContext());
			pageElem.setId(i);
			pageElem.setBackgroundResource(mPageRes[i]);
			pageElem.setOnClickListener(mClickListener);
			pageElem.setOnTouchListener(mTouchListener);
			this.addView(pageElem);
=======
	public ManualView(Context context, XMLResources markup, OnClickListener clickListener) {
		super(context);
		
		pages = new PageView[markup.getPageNumber()];
		for (int i = 0; i < markup.getPageNumber(); ++i) {
			pages[i] = new PageView(context, markup.getPageResources(i+1), clickListener);
>>>>>>> backup before atrocious experiments with git. Proper page scroll added
		}
		
		setBackgroundColor(Color.WHITE);
		setVerticalScrollBarEnabled(false);
		setHorizontalScrollBarEnabled(false);
		setFocusable(true);
		setFocusableInTouchMode(true);
		setClickable(true);
		setFeatureItems(pages);
	}
	
	/**
	 * @param pageNum 1-based page number
	 */
	public void setPage(int pageNum) {
		scrollToItem(pageNum-1);
	}	
}